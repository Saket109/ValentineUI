<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />

  <title>For You</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style/style.css" />
  <link rel="shortcut icon" type="image/png" href="./img/heart.svg" />
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    @keyframes fall {
      0% {
        transform: translateY(0);
        opacity: 1;
      }
      100% {
        transform: translateY(80px);
        opacity: 1;
      }
    }
    .falling-word {
      display: inline-block;
      animation: fall 10s ease-in infinite;
    }
  </style>
</head>

<body>
  <div id="valentine-bg"></div>
  <div class="container">
    <audio id="bgMusic" loop>
      <source src="audio/audio.mp3" type="audio/mp3">
    </audio>

    <!-- Scene 1 -->
    <div class="one">
      <h1 class="one">
        Hey <span id="name">xyz</span> üí´
      </h1>
      <p class="two" id="greetingText">
        My heart has been waiting for the right moment to tell you something.
      </p>
    </div>

    <!-- Scene 2 -->
    <div class="three">
      <p>‚ú® And I think... this is it. ‚ú®</p>
    </div>

    <!-- Scene 3 -->
    <div class="four">
      <p style="font-size: 2.2rem; color: #2b2b2b; margin: 20px 0; font-weight: 500; line-height: 1.6;">I could've sent a <span style="color: #ff6b9d; font-style: italic;">simple text</span> üí¨ but you deserve <span style="color: #ff4d6d; font-weight: 700;">so much more</span> üíù</p>
    </div>

    <!-- Scene 4 -->
    <div class="five">
      <p class="idea-1">Every moment with you feels <span style="color: #ff4d6d; font-weight: 700;">special</span> ‚ú®</p>
      <p class="idea-2">The way you smile, the way you care... üíï</p>
      <p class="idea-3">
        You've painted my world in <span style="background: linear-gradient(90deg, #ff4d6d, #ff85c0, #ff6b9d, #ff4d6d); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 700;">colors</span> I never knew existed.
      </p>
      <p class="idea-4">And I realized... </p>
      <p class="idea-5">
        I'm <span class="falling-word">falling</span> for you
      </p>
      <p class="idea-6">
        <span>S</span>
        <span>O</span>
      </p>
    </div>

    <!-- Scene 5 -->
    <div class="six">
      <img src="img/girl_pic.jpeg" class="girl-dp" id="imagePath" alt="A moment worth remembering" />
      <div class="wish">
        <h3 class=\"wish-hbd\" style=\"font-family: 'Fredoka', sans-serif; font-size: 3.5rem; font-weight: 700; margin: 20px 0; letter-spacing: 1px;\">You mean <span style=\"background: linear-gradient(135deg, #ff4d6d, #ff85c0); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;\">everything</span> to me üíù</h3>
        <h5 id="wishText" style="font-family: 'Fredoka', sans-serif; font-size: 1.2rem; font-weight: 500; letter-spacing: 0.5px; color: #2b2b2b;">And I hope you feel it in every heart that falls for you. ‚ú®</h5>
      </div>
    </div>

    <!-- Scene 6 -->
    <div class="seven">
      <div class="baloons">
        <img src="img/balloon.svg" alt="" />
        <img src="img/smiling.svg" alt="" />
        <img src="img/heart.svg" alt="" />
        <img src="img/balloon.svg" alt="" />
        <img src="img/heart.svg" alt="" />
        <img src="img/balloon.svg" alt="" />
        <img src="img/music-note.svg" alt="" />
        <img src="img/heart.svg" alt="" />
        <img src="img/balloon.svg" alt="" />
        <img src="img/heart.svg" alt="" />
        <img src="img/heart.svg" alt="" />
        <img src="img/music-note.svg" alt="" />
        <img src="img/smiling.svg" alt="" />
        <img src="img/happy.svg" alt="" />
        <img src="img/balloon.svg" alt="" />
        <img src="img/heart.svg" alt="" />
        <img src="img/smiling.svg" alt="" />
      </div>
    </div>

    <!-- Scene 7 -->
    <div class="eight">
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
    </div>

    <!-- Scene 8 -->
    <div class="val-box-wrapper">
      <div class="valentine-box">
        <h2 class="valentine-question">Will you be my Valentine? üíï</h2>

        <div class="buttons">
          <button id="yesBtn" class="common-btn">Yes</button>
          <button id="noBtn" class="common-btn">No</button>
        </div>

        <p id="valentineResponse"></p>
      </div>
    </div>


  </div>

  <!-- Scripts -->
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
  <script src="script/main.js"></script>
  <script>
    function spawnHeart(initial = false) {
      const heart = document.createElement("div");
      heart.className = "heart";

      // Randomize size: 15px to 35px (visible but performant)
      const size = 15 + Math.random() * 20;
      heart.style.width = size + "px";
      heart.style.height = size + "px";

      // Randomize horizontal position
      heart.style.left = Math.random() * 100 + "vw";

      // Randomize duration: 5s to 9s
      const duration = 5 + Math.random() * 4;
      heart.style.animationDuration = duration + "s";

      if (initial) {
        // Start mid-animation to cover screen immediately
        const skipTime = Math.random() * duration;
        heart.style.animationDelay = -skipTime + "s";
      } else {
        // Standard start
        heart.style.animationDelay = "0s";
      }

      document.body.appendChild(heart);

      // Cleanup
      setTimeout(() => heart.remove(), duration * 1000);
    }

    function spawnHearts() {
      // // Initial burst: moderate count
      // for (let i = 0; i < 30; i++) {
      //   spawnHeart(true);
      // }
      // Continuous: slower interval (600ms) to reduce CPU load
      setInterval(() => spawnHeart(false), 600);
    }

    const bgMusic = document.getElementById("bgMusic");

    // Play after FIRST user interaction (browser rule)
    document.addEventListener("click", () => {
      bgMusic.volume = 0.3;   // soft background
      bgMusic.play();
    }, { once: true });


    document.addEventListener("DOMContentLoaded", async () => {
      const urlParams = new URLSearchParams(window.location.search);
      const valentineCode = urlParams.get("valentineCode");

      if (!valentineCode) {
        document.body.innerHTML = `<h2>Error: Missing valentineCode in the URL.</h2>`;
        return;
      }

      const storedPassword = localStorage.getItem("valentinePassword");

      if (!storedPassword) {
        document.body.innerHTML = `
          <div class="password-container">
            <div class="login-card">
              <h2>üíñ Welcome to Your Valentine üíñ</h2>
              <p id="loginMessage">Please enter your password to continue.</p>
              <input type="password" id="passwordInput" placeholder="Enter your secret password" />
              <button id="submitPassword">Unlock Love</button>
              <p id="errorMessage" style="color: red; display: none;">Invalid password. Please try again.</p>
            </div>
          </div>
        `;

        const style = document.createElement("style");
        style.innerHTML = `
          .password-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            font-family: 'Work Sans', sans-serif;
          }
          .login-card {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
            width: 100%;
          }
          .login-card h2 {
            color: #ff6f91;
            margin-bottom: 10px;
          }
          .login-card p {
            color: #333;
            margin-bottom: 20px;
          }
          .login-card input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
          }
          .login-card button {
            background: #ff6f91;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
          }
          .login-card button:hover {
            background: #ff4f7a;
          }
        `;
        document.head.appendChild(style);

        document.getElementById("submitPassword").addEventListener("click", async () => {
          const password = document.getElementById("passwordInput").value;

          try {
            const response = await fetch("https://valentinewebsite-5dwg.onrender.com/ValidateValentineNumber", {
              // const response = await fetch("http://localhost:3000/ValidateValentineNumber", {
              // const response = await fetch("https://api.cohrenzai.com/ValidateValentineNumber", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ valentineCode, valentinePassword: password }),
            });

            if (response.status === 200) {
              spawnHearts();
              localStorage.setItem("valentinePassword", password);
              document.body.classList.add("valentine-active");

              // Smooth transition instead of hard reload
              setTimeout(() => {
                location.reload();
              }, 600);
            } else {
              const errorData = await response.json();
              document.getElementById("loginMessage").textContent = errorData.error;
              document.getElementById("loginMessage").style.color = "red";
            }
          } catch (err) {
            console.error("Error during validation:", err);
            alert("An error occurred. Please try again.");
          }
        });
      } else {
        try {
          const response = await fetch("https://valentinewebsite-5dwg.onrender.com/ValidateValentineNumber", {
            // const response = await fetch("http://localhost:3000/ValidateValentineNumber", {
            // const response = await fetch("https://api.cohrenzai.com/ValidateValentineNumber", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ valentineCode, valentinePassword: storedPassword }),
          });

          if (response.status === 200) {
            document.body.classList.add("valentine-active");
            spawnHearts();
            document.querySelector(".container").style.visibility = "visible";
          } else {
            localStorage.removeItem("valentinePassword");

            // Smooth transition instead of hard reload
            setTimeout(() => {
              location.reload();
            }, 600);
          }
        } catch (err) {
          console.error("Error during validation:", err);
          alert("An error occurred. Please try again.");
        }
      }
    });
  </script>
</body>

</html>


<!--
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Happy Valentine :)</title>
    <link
      rel="stylesheet"
    />
    <link rel="shortcut icon" type="image/png" href="./img/heart.svg" />
    <link rel="stylesheet" href="style/style.css" />
  </head>

  <body>
    <div class="container">
      <div class="one">
        <h1 class="one">
          Hey
          <span id="name">xyz</span>
        </h1>
        <p class="two" id="greetingText">I really like your name btw!</p>
      </div>
      <div class="three">
        <p>It's Valentine!!! :D</p>
      </div>
      <div class="four">
        <div class="text-box">
          <p class="hbd-chatbox">
            Happy Valentine's Day!! Yeee! Love and blah blah...
          </p>
          <p class="fake-btn">Send</p>
        </div>
      </div>
      <div class="five">
        <p class="idea-1">That's what I was going to do.</p>
        <p class="idea-2">But then I stopped.</p>
        <p class="idea-3">
          I realised, I wanted to do something <strong>special</strong>.
        </p>
        <p class="idea-4">Because,</p>
        <p class="idea-5">
          You are Special
          <span>:)</span>
        </p>
        <p class="idea-6">
          <span>S</span>
          <span>O</span>
        </p>
      </div>
      <div class="six">
        <img src="img/vector.jpg" alt="" class = "girl-dp" id="imagePath" />
        <div class="wish">
          <h3 class="wish-hbd">Happy Valentine's Day Gorgeous</h3>
          <h5 id="wishText">kuch kuch</h5>
        </div>
      </div>
      <div class="seven">
        <div class="baloons">
          <img src="img/balloon.svg" alt="" />
          <!-- <img src="img/music-note.svg" alt="" /> 
          <img src="img/smiling.svg" />
          <img src="img/heart.svg" />
          <!-- <img src="img/happy.svg" alt="" /> 
          <img src="img/balloon.svg" alt="" />
          <!-- <img src="img/music-note.svg" alt="" /> 
          <!-- <img src="img/smiling.svg" />
          <img src="img/heart.svg" />
          <img src="img/balloon.svg" alt="" />
          <img src="img/music-note.svg" alt="" />
          <img src="img/heart.svg" />
          <img src="img/balloon.svg" alt="" />
          <!-- <img src="img/music-note.svg" alt="" /> 
          <!-- <img src="img/smiling.svg" /> 
          
          <img src="img/heart.svg" />
          <img src="img/balloon.svg" alt="" />
          <img src="img/heart.svg" />
          <img src="img/heart.svg" />
          <img src="img/music-note.svg" alt="" />
          <img src="img/smiling.svg" />
         
          <img src="img/happy.svg" alt="" />
          <img src="img/balloon.svg" alt="" />
          <img src="img/heart.svg" />
          <!-- <img src="img/music-note.svg" alt="" />
          <!-- <img src="img/heart.svg" />
          
          <img src="img/happy.svg" alt="" />
          <img src="img/balloon.svg" alt="" />
          <img src="img/music-note.svg" alt="" /> 
          <img src="img/smiling.svg" />
          <!-- <img src="img/heart.svg" /> 
          <!-- <img src="img/happy.svg" alt="" /> 
        </div>
      </div>
      <div class="eight">
        <svg viewBox="0 0 40 40" xmlnssvg/heart.svg.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
      </div>
      <div class="nine">
        <p>Okay, now come back and tell me if you liked it.</p>
        <p id="replay">Or click, if you want to watch it again.</p>
        <p class="last-smile">:)</p>
      </div>
    </div>
  </body>

  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
  <script type="text/babel" src="script/main.js"></script>
</html>
-->