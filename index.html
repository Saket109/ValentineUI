<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Happy Valentine :)</title>
    <link
      rel="stylesheet"
    />
    <link rel="shortcut icon" type="image/png" href="./img/heart.svg" />
    <link rel="stylesheet" href="style/style.css" />
  </head>

  <body>
    <div class="container">
      <div class="one">
        <h1 class="one">
          Hey
          <span id="name">xyz</span>
        </h1>
        <p class="two" id="greetingText">I really like your name btw!</p>
      </div>
      <div class="three">
        <p>It's Valentine!!! :D</p>
      </div>
      <div class="four">
        <div class="text-box">
          <p class="hbd-chatbox">
            Happy Valentine's Day!! Yeee! Love and blah blah...
          </p>
          <p class="fake-btn">Send</p>
        </div>
      </div>
      <div class="five">
        <p class="idea-1">That's what I was going to do.</p>
        <p class="idea-2">But then I stopped.</p>
        <p class="idea-3">
          I realised, I wanted to do something <strong>special</strong>.
        </p>
        <p class="idea-4">Because,</p>
        <p class="idea-5">
          You are Special
          <span>:)</span>
        </p>
        <p class="idea-6">
          <span>S</span>
          <span>O</span>
        </p>
      </div>
      <div class="six">
        <img src="img/vector.jpg" alt="" class = "girl-dp" id="imagePath" />
        <div class="wish">
          <h3 class="wish-hbd">Happy Valentine's Day Gorgeous</h3>
          <h5 id="wishText">kuch kuch</h5>
        </div>
      </div>
      <div class="seven">
        <div class="baloons">
          <img src="img/wings_heart.jpg"/>
          <img src="img/emoji-with-a-heart-shaped-balloon-in-one-hand-winking-and-smiling-for-valentines-day-on-transparent-background-png.webp" alt="" />
          <img src="img/With_rose.png" />
          <!-- <img src="img/music-note.svg" alt="" /> -->
          <img src="img/emoji-with-a-heart-shaped-balloon-in-one-hand-winking-and-smiling-for-valentines-day-on-transparent-background-png.webp" />
          <img src="img/Red_Heart_Emoji_Eyes.jpg" />
          <img src="img/wings_heart.jpg"/>
          <img src="img/Letter_heart.avif"/>
          <img src="img/With_rose.png" />
          <!-- <img src="img/happy.svg" alt="" /> -->
          <img src="img/emoji-with-a-heart-shaped-balloon-in-one-hand-winking-and-smiling-for-valentines-day-on-transparent-background-png.webp" alt="" />
          <img src="img/With_rose.png" />
          <img src="img/wings_heart.jpg"/>
          <img src="img/Letter_heart.avif"/>
          <!-- <img src="img/music-note.svg" alt="" /> -->
          <!-- <img src="img/smiling.svg" /> -->
          <img src="img/emoji-with-a-heart-shaped-balloon-in-one-hand-winking-and-smiling-for-valentines-day-on-transparent-background-png.webp" />
          <img src="img/wings_heart.jpg"/>
          <img src="img/Letter_heart.avif"/>
          <img src="img/flying_hearts.png" alt="" />
          <img src="img/With_multiple_flying_hearts.jpg" alt="" />
          <img src="img/pink_Heart.jpg" alt="" />
          <img src="img/Red_Heart_Emoji_Eyes.jpg" />
          <img src="img/Letter_heart.avif"/>
          <img src="img/wings_heart.jpg"/>
          <img src="img/With_rose.png" />
          <img src="img/flying_hearts.png" alt="" />
          <!-- <img src="img/music-note.svg" alt="" /> -->
          <!-- <img src="img/smiling.svg" /> -->
          
          <img src="img/pink_Heart.jpg" />
          <img src="img/wings_heart.jpg"/>
          <img src="img/Red_Heart_Emoji_Eyes.jpg" alt="" />
          <img src="img/red-love-emoji-letter-message-pink-background-symbol-valentine-s-day-giving-mail-vector-illustration-flat-style-modern-223510650.webp" />
          <img src="img/With_rose.png" />
          <img src="img/wings_heart.jpg"/>
          <img src="img/Letter_heart.avif"/>
          <img src="img/With_multiple_flying_hearts.jpg" alt="" />
          <img src="img/With_rose.png" />
          <img src="img/pink_Heart.jpg" alt="" />
          <img src="img/smiling.svg" />
          <img src="img/wings_heart.jpg"/>
         
          <img src="img/With_multiple_flying_hearts.jpg" alt="" />
          <img src="img/red-love-emoji-letter-message-pink-background-symbol-valentine-s-day-giving-mail-vector-illustration-flat-style-modern-223510650.webp" alt="" />
          <img src="img/pink_Heart.jpg" />
          <img src="img/wings_heart.jpg"/>
          <img src="img/Letter_heart.avif"/>
          <img src="img/With_rose.png" />
          <!-- <img src="img/music-note.svg" alt="" /> -->
          <!-- <img src="img/heart.svg" />
          
          <img src="img/happy.svg" alt="" />
          <img src="img/balloon.svg" alt="" />
          <img src="img/music-note.svg" alt="" /> -->
          <img src="img/Red_Heart_Emoji_Eyes.jpg" />
          <img src="img/wings_heart.jpg"/>
          <img src="img/Letter_heart.avif"/>
          <!-- <img src="img/heart.svg" /> -->
          <!-- <img src="img/happy.svg" alt="" /> -->
          <img src="img/With_multiple_flying_hearts.jpg" alt="" />
          <img src="img/With_rose.png" />
          <img src="img/Red_Heart_Emoji_Eyes.jpg" />
          <img src="img/wings_heart.jpg"/>
          <img src="img/Letter_heart.avif"/>
        </div>
      </div>
      <div class="eight">
        <svg viewBox="0 0 40 40" xmlnssvg="/heart.svg.org/2000/svg">
        <circle cx="20" cy="20" r="20" />
      </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
        <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="20" />
        </svg>
      </div>
      <div class="nine">
        <p>Okay, now come back and tell me if you liked it.</p>
        <p id="replay">Or click, if you want to watch it again.</p>
        <p class="last-smile">:)</p>
      </div>
    </div>
  </body>

  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
  <script type="text/babel" src="script/main.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const urlParams = new URLSearchParams(window.location.search);
      const valentineCode = urlParams.get("valentineCode");

      if (!valentineCode) {
        document.body.innerHTML = `<h2>Error: Missing valentineCode in the URL.</h2>`;
        return;
      }

      const storedPassword = localStorage.getItem("valentinePassword");

      if (!storedPassword) {
        document.body.innerHTML = `
          <div class="password-container">
            <div class="login-card">
              <h2>ðŸ’– Welcome to Your Valentine ðŸ’–</h2>
              <p id="loginMessage">Please enter your password to continue.</p>
              <input type="password" id="passwordInput" placeholder="Enter your secret password" />
              <button id="submitPassword">Unlock Love</button>
              <p id="errorMessage" style="color: red; display: none;">Invalid password. Please try again.</p>
            </div>
          </div>
        `;

        const style = document.createElement("style");
        style.innerHTML = `
          .password-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            font-family: 'Work Sans', sans-serif;
          }
          .login-card {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
            width: 100%;
          }
          .login-card h2 {
            color: #ff6f91;
            margin-bottom: 10px;
          }
          .login-card p {
            color: #333;
            margin-bottom: 20px;
          }
          .login-card input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
          }
          .login-card button {
            background: #ff6f91;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
          }
          .login-card button:hover {
            background: #ff4f7a;
          }
        `;
        document.head.appendChild(style);

        document.getElementById("submitPassword").addEventListener("click", async () => {
          const password = document.getElementById("passwordInput").value;

          try {
            const response = await fetch("https://valentinewebsite-5dwg.onrender.com/ValidateValentineNumber", {
              // const response = await fetch("http://localhost:3000/ValidateValentineNumber", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ valentineCode, valentinePassword: password }),
            });

            if (response.status === 200) {
              localStorage.setItem("valentinePassword", password);
              location.reload();
            } else {
              const errorData = await response.json();
              document.getElementById("loginMessage").textContent = errorData.error;
              document.getElementById("loginMessage").style.color = "red";
            }
          } catch (err) {
            console.error("Error during validation:", err);
            alert("An error occurred. Please try again.");
          }
        });
      } else {
        try {
          const response = await fetch("https://valentinewebsite-5dwg.onrender.com/ValidateValentineNumber", {
            // const response = await fetch("http://localhost:3000/ValidateValentineNumber", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ valentineCode, valentinePassword: storedPassword }),
          });

          if (response.status === 200) {
            document.querySelector(".container").style.visibility = "visible";
          } else {
            localStorage.removeItem("valentinePassword");
            location.reload();
          }
        } catch (err) {
          console.error("Error during validation:", err);
          alert("An error occurred. Please try again.");
        }
      }
    });
  </script>
</html>
